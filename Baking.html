<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>í¬ì •'s ì·¨ë¯¸ í˜ì´ì§€</title>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="//dapi.kakao.com/v2/maps/sdk.js?appkey=f3c9f0ec8669c2333a8b6964f82e24ae&libraries=services"></script>

  <style>
   /* Fonts */
@font-face{
  font-family:'BMHANNAPro';
  src:url('/fonts/BMHANNAPro.ttf') format('truetype');
  font-display:swap;
}

html,body{ height:100%; }

/* ===== Scrollbar ìˆ¨ê¹€(ì „ì—­, ìŠ¤í¬ë¡¤ ë™ì‘ ìœ ì§€) ===== */
/* Firefox */
* { scrollbar-width: none; }
/* IE/Legacy Edge */
* { -ms-overflow-style: none; }
/* WebKit (Chrome/Safari/New Edge/Opera) */
*::-webkit-scrollbar { display:none; width:0; height:0; }

/* Theme */
:root{
  --nfx-red:#E50914;
  --ink:#e5e7eb; --muted:#cbd5e1;
  --bg1:#0b0b0d; --bg2:#111113;
  --tile:#0f121a; --ring:rgba(255,255,255,.14);
  --shadow:0 22px 60px rgba(0,0,0,.55);
}

body{
  font-family:'BMHANNAPro','Noto Sans KR',system-ui,-apple-system,'Segoe UI',Roboto,sans-serif;
  color:var(--ink);
  background:
    radial-gradient(1200px 700px at 50% -10%, rgba(229,9,20,.18), transparent 60%),
    linear-gradient(180deg,var(--bg1) 0%, var(--bg2) 60%, var(--bg1) 100%);
  overflow-x:hidden; /* ê°€ë¡œ ìŠ¤í¬ë¡¤ë§Œ ì°¨ë‹¨ */
}

/* Navbar (íˆ¬ëª… â†’ ìŠ¤í¬ë¡¤ ì‹œ ì†”ë¦¬ë“œ) */
.navbar{
  position:sticky; top:0; z-index:1040;
  background:transparent !important; transition: background .25s ease, border-color .25s ease;
  border-bottom:1px solid transparent;
}
.navbar.nav-solid{
  background:rgba(17,17,19,.86)!important; backdrop-filter: blur(8px);
  border-bottom-color: rgba(255,255,255,.08);
}
.navbar .navbar-brand, .navbar .nav-link{ color:#f3f4f6 !important; }

/* Hero (í”„ë¡œí•„ ë°•ìŠ¤ ë ˆì´ì•„ì›ƒ) */
.hero{
  position:relative; min-height:64vh; display:flex; align-items:flex-end;
  background:
    linear-gradient(180deg, rgba(0,0,0,.25) 0%, rgba(0,0,0,.65) 70%),
    url("/images/heejong/ì£¼ë°©.png") center/cover no-repeat;
  border-bottom:1px solid rgba(255,255,255,.08);
  box-shadow: inset 0 -60px 100px -60px rgba(0,0,0,.65);
  isolation:isolate;
}
.hero-inner{ width:100%; max-width:1200px; margin:0 auto; padding:48px 16px; }
.hero-meta{
  display:flex; align-items:flex-start; gap:18px; flex-wrap:wrap;
  text-shadow:0 2px 18px rgba(0,0,0,.5);
}
/* ì •ì‚¬ê° ì•„ë°”íƒ€ â€” í¬ê¸°ëŠ” JS ë™ê¸°í™” */
.avatar{
  width:140px; height:140px; aspect-ratio:1/1;
  border-radius:14px; object-fit:cover; display:block;
  box-shadow: var(--shadow); border:2px solid rgba(255,255,255,.6);
}
.title-block h1{ margin:0; font-size:clamp(32px,6vw,64px); font-weight:900; letter-spacing:.02em; }
.title-block .kicker{
  display:inline-flex; align-items:center; gap:8px; font-weight:900; color:#fff;
  background: rgba(0,0,0,.35); border:1px solid rgba(255,255,255,.18); border-radius:999px; padding:.25rem .6rem;
  margin-bottom:6px;
}
.title-block .desc{ color:var(--muted); margin:.25rem 0 0; }

.hero-actions{ margin-top:14px; display:flex; gap:10px; flex-wrap:wrap; }
.btn-cta{
  display:inline-flex; align-items:center; gap:8px; font-weight:900;
  background:var(--nfx-red); border:1px solid var(--nfx-red); color:#fff; border-radius:10px; padding:.6rem 1rem;
  box-shadow:0 12px 30px rgba(0,0,0,.35);
}
.btn-ghost{
  display:inline-flex; align-items:center; gap:8px; font-weight:900;
  background:rgba(255,255,255,.1); border:1px solid rgba(255,255,255,.18); color:#fff; border-radius:10px; padding:.6rem 1rem;
}

/* ì„¹ì…˜/íŒ¨ë„ */
.section-head{ display:flex; align-items:center; gap:.6rem; margin:18px 0 12px; }
.section-head .bar{
  width:10px; height:26px; border-radius:6px;
  background: linear-gradient(180deg,#f43f5e,#f59e0b);
  box-shadow: 0 0 18px rgba(244,63,94,.35);
}
.section-head .title{ font-weight:900; letter-spacing:.02em; }
.content-wrap, .container{ max-width:1200px; }

.panel{
  background: rgba(17,17,19,.7);
  border:1px solid rgba(255,255,255,.08);
  border-radius:16px; padding:16px; box-shadow:0 18px 44px rgba(0,0,0,.35);
}

/* ê°¤ëŸ¬ë¦¬(ë‹¤í¬ í†¤) */
.bg-body-secondary{
  background:rgba(255,255,255,.04)!important; color:var(--ink);
  border-top:1px solid rgba(255,255,255,.06);
  border-bottom:1px solid rgba(255,255,255,.06);
}
.gallery-img{
  aspect-ratio:4/3; object-fit:cover; border-radius:12px;
  background:#0b0c10; border:1px solid rgba(255,255,255,.06);
  box-shadow:0 12px 30px rgba(0,0,0,.35);
  transition:transform .25s ease, filter .25s ease;
}
.gallery-img:hover{ transform:translateY(-3px); filter:brightness(1.06); }

/* í¬ì¸íŠ¸ ì»¬ëŸ¬ (ì œëª©/ë¼ë²¨) */
.text-brown{ color:var(--nfx-red)!important; }

/* CAFE ì¹´ë“œ (ë‹¤í¬ ê¸€ë˜ìŠ¤) */
.cafe-section{
  background: linear-gradient(135deg, #14161b 0%, #0f1116 60%, #0b0c10 100%);
  border:1px solid rgba(255,255,255,.08);
  border-radius:16px; padding:2rem; box-shadow:0 18px 44px rgba(0,0,0,.35);
}
.cafe-tags .badge{
  background: rgba(255,255,255,.12);
  border:1px solid rgba(255,255,255,.16);
  color:#fff; font-size:.85rem; padding:.5em .9em;
  backdrop-filter: blur(8px);
}
.cafe-photo img{
  width:100%; height:auto; max-height:400px; object-fit:cover; border-radius:12px;
  border:1px solid rgba(255,255,255,.08);
  transition: transform .3s ease, filter .3s ease;
}
.cafe-photo img:hover{ transform:scale(1.04); filter:brightness(1.05); }

.cafe-review{
  font-size:1rem; font-style:italic; color:#f3f4f6;
  background: rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.1);
  padding:1rem; border-radius:12px;
}

/* ë²„íŠ¼/í¼ (ë ˆë“œ í¬ì¸íŠ¸) */
.btn-brown{ background:var(--nfx-red); color:#fff; border:1px solid var(--nfx-red); }
.btn-brown:hover{ background:#c20b14; color:#fff; border-color:#c20b14; }
.btn-primary{ background:var(--nfx-red); border-color:var(--nfx-red); }
.btn-primary:hover{ background:#c20b14; border-color:#c20b14; }

.cafe-form-card{
  background: rgba(17,17,19,.7);
  border:1px solid rgba(255,255,255,.08)!important;
  border-radius:16px; padding:2rem;
  transition: transform .2s, box-shadow .2s;
}
.cafe-form-card:hover{ transform: translateY(-3px); box-shadow:0 18px 44px rgba(0,0,0,.35); }

.form-custom{
  border-radius:10px; border:1px solid rgba(255,255,255,.18);
  background:rgba(255,255,255,.05); color:#f5f7fa;
}
.form-custom::placeholder{ color:#9aa4b2; }
.form-custom:focus{
  border-color:var(--nfx-red);
  box-shadow:0 0 0 .2rem rgba(229,9,20,.25);
  background:rgba(255,255,255,.07); color:#fff;
}

/* ë¦¬ìŠ¤íŠ¸/ìŠ¤í¬ë¡¤(ë‹¤í¬) â€” ìŠ¤í¬ë¡¤ë°” ìˆ¨ê¹€ */
#searchResults{ padding-right:12px; border:none; background:transparent; }
#searchResults .list-group-item{
  background:transparent; color:#e5e7eb; border:none!important; padding:10px 8px;
  border-radius:8px;
}
#searchResults .list-group-item:hover{ background:rgba(255,255,255,.06); }
/* ê°œë³„ ìŠ¤í¬ë¡¤ ì˜ì—­ì˜ ë§‰ëŒ€ë„ ìˆ¨ê¹€ (ìŠ¤í¬ë¡¤ ë™ì‘ ìœ ì§€) */
#searchResults{ overflow:auto; }
#searchResults { scrollbar-width: none; -ms-overflow-style: none; }
#searchResults::-webkit-scrollbar{ display:none; width:0; height:0; }

.delete-icon{ font-size:1.2rem; transition: transform .2s ease, color .2s ease; }
.delete-icon:hover{ transform: scale(1.2) rotate(-10deg); color:#ff6b6b; }

/* ì§€ë„ ë°•ìŠ¤ í…Œë‘ë¦¬ */
#map-fixed, #selectMap{ border:1px solid rgba(255,255,255,.08); background:#0b0c10; }

/* ê³ ì • ë’¤ë¡œê°€ê¸° ë²„íŠ¼ */
.fixed-back{ position: fixed; left: 16px; bottom: 16px; z-index: 1030; }

/* Footer */
footer.bg-body-tertiary{
  background: rgba(17,17,19,.86)!important; backdrop-filter: blur(6px);
  border-top:1px solid rgba(255,255,255,.08);
  color:#cbd5e1 !important;
}

  </style>
</head>

<body>
  <!-- Nav -->
  <nav class="navbar navbar-expand-lg bg-body-tertiary shadow-sm">
    <div class="container">
      <a class="navbar-brand fw-bold" href="index.html">ê±´ì¬ì´ì¡°ì˜ ì·¨ë¯¸ìƒí™œ</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#nav"
              aria-controls="nav" aria-expanded="false" aria-label="í† ê¸€ ë‚´ë¹„ê²Œì´ì…˜">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div id="nav" class="collapse navbar-collapse">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          <li class="nav-item"><a class="nav-link" href="canva.html">Canvas</a></li>
          <li class="nav-item"><a class="nav-link" href="video.html">Video</a></li>
          <li class="nav-item"><a class="nav-link" href="music.html">Music</a></li>
          <li class="nav-item"><a class="nav-link" href="kanban-board.html">Kanban</a></li>
          <li class="nav-item"><a class="nav-link" href="CafeMap.html">Map</a></li>
        </ul>
        <div class="d-flex gap-2 align-items-center">
          <a class="btn btn-primary btn-sm" href="signup.html">íšŒì›ê°€ì…</a>
        </div>
      </div>
    </div>
  </nav>



  <!-- Hero (í”„ë¡œí•„ ë°•ìŠ¤) -->
  <header class="hero">
    <div class="hero-inner">
      <div class="hero-meta">
        <img src="/images/heejong/í”„ë¡œí•„.png" alt="í”„ë¡œí•„" class="avatar" id="avatar">
        <div class="title-block" id="titleBlock">
          <h1 id="title">í¬ì •'s BAKING</h1>
          <p class="desc mb-0">í•  ì¤„ ì•„ëŠ” ê±´ ìš°ì„  ì¿ í‚¤ â€” ì–¸ì  ê°€ëŠ” ë¹µê¹Œì§€ ì •ë³µ ì˜ˆì •!</p>
          <div class="hero-actions" id="heroActions">
            <a href="#about" class="btn-cta"><i class="fa-solid fa-circle-info"></i> ì†Œê°œ ë³´ê¸°</a>
            <a href="#hobbies" class="btn-ghost"><i class="fa-solid fa-images"></i> ê°¤ëŸ¬ë¦¬</a>
            <a href="#memories" class="btn-ghost"><i class="fa-solid fa-mug-hot"></i> ì¶”ì²œ ì¹´í˜</a>
          </div>
        </div>
      </div>
    </div>
  </header>

  <!-- ì†Œê°œ -->
  <section class="py-5" id="about">
    <div class="container">
      <div class="section-head">
        <span class="bar"></span><h2 class="title m-0 text-brown">ì†Œê°œ</h2>
      </div>
      <div class="panel">
        <p class="mb-2">ë¹µê³¼ ì¿ í‚¤, ì´ˆì½œë¦¿ ì—†ìœ¼ë©´ ëª»ì‚´ì•„ì„œ ì§ì ‘ ë§Œë“¤ê³ ì‹¶ì€ ë¹µìˆœğŸì…ë‹ˆë‹¤.</p>
        <p class="mb-0">ê°€ë” ëŒ€ëŸ‰ìƒì‚°í•´ì„œ ë‚˜ëˆ ì£¼ëŠ” ê±¸ ì¢‹ì•„í•´ìš”. ì§€ê¸ˆì€ ì¿ í‚¤ ìœ„ì£¼ì§€ë§Œ, ê³§ ë¹µë„ ë„ì „!</p>
      </div>
    </div>
  </section>

  <!-- ì¿ í‚¤ ê°¤ëŸ¬ë¦¬ -->
  <section class="py-5 bg-body-secondary" id="hobbies">
    <div class="container">
      <div class="section-head">
        <span class="bar"></span><h2 class="title m-0">Gallery</h2>
      </div>
      <div class="row g-4">
        <div class="col-12 col-sm-6 col-lg-3"><img src="/images/heejong/ê±°ë¶ì´ì¿ í‚¤.png" class="w-100 gallery-img" alt="ê±°ë¶ì´ì¿ í‚¤"></div>
        <div class="col-12 col-sm-6 col-lg-3"><img src="/images/heejong/ì¿ í‚¤ê³µì¥.png" class="w-100 gallery-img" alt="ì¿ í‚¤ê³µì¥"></div>
        <div class="col-12 col-sm-6 col-lg-3"><img src="/images/heejong/ë§ˆë£¨ì¿ í‚¤.png" class="w-100 gallery-img" alt="ë§ˆë£¨ì¿ í‚¤"></div>
        <div class="col-12 col-sm-6 col-lg-3"><img src="/images/heejong/ì •ì²´ëª¨ë¥¼ê³°ëŒì´ì¿ í‚¤.png" class="w-100 gallery-img" alt="ì •ì²´ëª¨ë¥¼ê³°ëŒì´ì¿ í‚¤"></div>
      </div>
    </div>
  </section>

  <!-- Recommend CAFE -->
  <section class="py-5" id="memories">
    <h1 class="h4 fw-bold mb-4 text-center">â˜•ï¸ Recommend CAFE</h1>

    <div id="cafe-list">
      <!-- ì˜ˆì‹œ ì¹´ë“œ -->
      <div class="container cafe-section mb-4">
        <div class="d-flex justify-content-between align-items-start">
          <h2 class="h5 fw-bold mb-3">ë¡œìŠ¤íŠ¸ì•¤ë² ì´í¬ ê°€ë½ì </h2>
          <i class="fa-solid fa-trash-can text-danger delete-icon" style="cursor:pointer;"></i>
        </div>

        <div class="d-flex flex-wrap gap-2 cafe-tags mb-4">
          <span class="badge rounded-pill">#ì„œìš¸ì†¡íŒŒ</span>
          <span class="badge rounded-pill">#ì–‘ì‹</span>
          <span class="badge rounded-pill">#íƒ€ë¥´íŠ¸</span>
          <span class="badge rounded-pill">#ë¹µ</span>
        </div>

        <div class="row g-3">
          <div class="col-md-6 cafe-photo">
            <h6 class="fw-semibold mb-2 text-brown">PHOTO</h6>
            <div class="row g-3">
              <div class="col-6"><img src="/images/heejong/íƒ€ë¥´íŠ¸1.png" class="w-100 shadow-sm" alt="íƒ€ë¥´íŠ¸1"></div>
              <div class="col-6"><img src="/images/heejong/íƒ€ë¥´íŠ¸2.png" class="w-100 shadow-sm" alt="íƒ€ë¥´íŠ¸2"></div>
            </div>
          </div>
          <div class="col-md-6 d-flex flex-column justify-content-between">
            <div>
              <h6 class="fw-semibold mb-2 text-brown">í•œì¤„í›„ê¸°</h6>
              <div class="cafe-review">ê²‰ë°”ì†ì´‰ ê·¸.ì.ì²´ ğŸ“â¤ï¸</div>
            </div>
            <div>
              <h6 class="fw-semibold mt-3 mb-2 text-brown">ì¹´í˜ ìœ„ì¹˜ ë³´ê¸°</h6>
              <div id="map-fixed-addr" class="small text-muted mb-2">
                <i class="fa-solid fa-location-dot me-1"></i><span></span>
              </div>
              <div id="map-fixed" style="width:100%;height:220px;border-radius:10px;"></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ìƒˆ ì¹´í˜ ë“±ë¡ í¼ -->
    <div class="container mt-5" id="media">
      <div class="card cafe-form-card shadow-sm border-0">
        <div class="card-body">
          <h2 class="h5 fw-bold mb-4 text-center text-brown">ì¹´í˜ ì¶”ì²œí•˜ê¸°</h2>
          <form id="cafeForm">
            <div class="mb-3">
              <label class="form-label fw-semibold"><i class="fa-solid fa-store me-2 text-brown"></i>ì¹´í˜ ì´ë¦„</label>
              <input type="text" class="form-control form-custom" id="cafeName" required>
            </div>

            <div class="mb-3">
              <label class="form-label fw-semibold"><i class="fa-solid fa-tags me-2 text-brown"></i>íƒœê·¸ (ì‰¼í‘œë¡œ êµ¬ë¶„)</label>
              <input type="text" class="form-control form-custom" id="cafeTags" placeholder="#ì†¡íŒŒ, #íƒ€ë¥´íŠ¸">
            </div>

            <div class="mb-3">
              <label class="form-label fw-semibold"><i class="fa-solid fa-image me-2 text-brown"></i>ì‚¬ì§„ ì—…ë¡œë“œ (ìµœëŒ€ 2ì¥)</label>
              <input type="file" class="form-control form-custom" id="cafePhotos" accept="image/*" multiple>
            </div>

            <!-- ìœ„ì¹˜ ê²€ìƒ‰/ì„ íƒ -->
            <div class="mb-3">
              <label class="form-label fw-semibold"><i class="fa-solid fa-map-location-dot me-2 text-brown"></i>ìœ„ì¹˜ ì„ íƒ</label>
              <div class="input-group mb-2">
                <input type="text" id="placeKeyword" class="form-control form-custom" placeholder="ì˜ˆ: ë¡œìŠ¤íŠ¸ì•¤ë² ì´í¬ ê°€ë½ì ">
                <button type="button" id="btnSearch" class="btn btn-brown">ê²€ìƒ‰</button>
              </div>
              <div class="row g-3 mt-2">
                <div class="col-md-7">
                  <div id="selectMap" style="width:100%;height:260px;border-radius:10px;"></div>
                </div>
                <div class="col-md-5">
                  <ul id="searchResults" class="list-group small" style="max-height:260px;overflow:auto;"></ul>
                </div>
              </div>
              <div id="chosenAddress" class="small text-muted mt-2"></div>
            </div>

            <div class="mb-3">
              <label class="form-label fw-semibold"><i class="fa-solid fa-pen-nib me-2 text-brown"></i>í•œì¤„ í›„ê¸°</label>
              <input type="text" class="form-control form-custom" id="cafeReview" required>
            </div>

            <!-- ìˆ¨ê¹€ ì£¼ì†Œ -->
            <input type="hidden" id="cafeLat">
            <input type="hidden" id="cafeLng">
            <input type="hidden" id="cafeAddress">

            <div class="text-center">
              <button type="submit" class="btn btn-brown px-4 py-2 rounded-pill shadow-sm">
                <i class="fa-solid fa-plus me-1"></i> ë“±ë¡
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </section>

  <!-- ì´ë¯¸ì§€ ëª¨ë‹¬ -->
  <div class="modal fade" id="imageModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
      <div class="modal-content bg-transparent border-0 shadow-none">
        <div class="modal-body text-center p-0">
          <img id="modalImage" src="" class="img-fluid rounded shadow-lg" alt="ì›ë³¸ ì´ë¯¸ì§€">
        </div>
      </div>
    </div>
  </div>

  <footer class="mt-auto py-4 bg-body-tertiary text-center small text-body-secondary">
    Â© <span id="year"></span> Team ê±´ì¬ì´ì¡°
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // ì—°ë„
    document.getElementById('year').textContent = new Date().getFullYear();

    // Nav ì†”ë¦¬ë“œ ì „í™˜
    const nav = document.querySelector('.navbar');
    const onScroll = ()=> nav.classList.toggle('nav-solid', window.scrollY > 24);
    onScroll(); window.addEventListener('scroll', onScroll);

    // ì•„ë°”íƒ€ í¬ê¸°/ì •ë ¬ ë™ê¸°í™” (ë‹¤ë¥¸ í˜ì´ì§€ì™€ ë™ì¼ ë¡œì§)
    function syncAvatar() {
      const kicker = document.getElementById('kicker');
      const avatar = document.getElementById('avatar');
      const title = document.getElementById('title');
      const actions = document.getElementById('heroActions');
      if (!avatar || !title) return;

      // h1ê³¼ ìˆ˜í‰ì •ë ¬: kicker ë†’ì´ë§Œí¼ ìœ„ ì—¬ë°± ë³´ì •
      const mb = kicker ? parseFloat(getComputedStyle(kicker).marginBottom || '0') : 0;
      const offset = kicker ? kicker.offsetHeight + mb : 0;
      avatar.style.marginTop = offset + 'px';

      // í¬ê¸° = ì œëª© ìƒë‹¨ ~ ì•¡ì…˜ í•˜ë‹¨
      const top = title.offsetTop;
      const bottom = actions ? (actions.offsetTop + actions.offsetHeight) : (title.offsetTop + title.offsetHeight);
      let size = Math.round(bottom - top);
      size = Math.max(140, Math.min(340, size + 8)); // ì•ˆì „ë²”ìœ„
      avatar.style.width = size + 'px';
      avatar.style.height = size + 'px';
    }
    window.addEventListener('load', syncAvatar);
    window.addEventListener('resize', syncAvatar);

    // ===== ì•„ë˜ë¶€í„° CAFE ê¸°ëŠ¥ =====
    function getCafes() { return JSON.parse(localStorage.getItem('cafes')) || []; }
    function saveCafes(cafes) { localStorage.setItem('cafes', JSON.stringify(cafes)); }
    function addCafe(cafe) { const cs = getCafes(); cs.push(cafe); saveCafes(cs); }
    function removeCafe(index) { const cs = getCafes(); cs.splice(index, 1); saveCafes(cs); }

    function appendCafe(cafe, photos = [], index) {
      const wrap = document.createElement('div');
      wrap.className = 'container cafe-section mb-4';
      const mapId = `map-${index}-${Date.now()}`;
      wrap.innerHTML = `
        <div class="d-flex justify-content-between align-items-start">
          <h2 class="h5 fw-bold mb-3">${cafe.name}</h2>
          <i class="fa-solid fa-trash-can text-danger delete-icon" style="cursor:pointer;"></i>
        </div>
        <div class="d-flex flex-wrap gap-2 cafe-tags mb-4">
          ${(cafe.tags || []).map(t => `<span class="badge rounded-pill">#${t.replace(/^#/, '')}</span>`).join('')}
        </div>
        <div class="row g-4">
          <div class="col-md-6 cafe-photo">
            <h6 class="fw-semibold mb-2 text-brown">PHOTO</h6>
            <div class="row g-3">
              ${photos.map((p, i) => {
                let colClass = 'col-6';
                if (photos.length === 1) colClass = 'col-12';
                else if (photos.length === 3) colClass = 'col-4';
                return `<div class="${colClass}"><img src="${p}" class="w-100 shadow-sm rounded-3" alt="cafe photo"></div>`;
              }).join('')}
            </div>
          </div>
          <div class="col-md-6 d-flex flex-column justify-content-between">
            <div>
              <h6 class="fw-semibold mb-2 text-brown">í•œì¤„í›„ê¸°</h6>
              <div class="cafe-review">${cafe.review || ''}</div>
            </div>
            <div>
              <h6 class="fw-semibold mt-3 mb-2 text-brown">ì¹´í˜ ìœ„ì¹˜ ë³´ê¸°</h6>
              ${cafe.address ? `<div class="small text-muted mb-2"><i class="fa-solid fa-location-dot me-1"></i>${cafe.address}</div>` : ''}
              <div id="${mapId}" style="width:100%;height:220px;border-radius:10px;"></div>
            </div>
          </div>
        </div>
      `;
      wrap.querySelector('.delete-icon').addEventListener('click', () => {
        if (confirm('ì´ ì¹´í˜ë¥¼ ì‚­ì œí• ê¹Œìš”?')) { removeCafe(index); wrap.remove(); }
      });
      document.getElementById('cafe-list').appendChild(wrap);

      if (cafe.lat && cafe.lng) {
        const map = new kakao.maps.Map(document.getElementById(mapId), {
          center: new kakao.maps.LatLng(cafe.lat, cafe.lng), level: 3
        });
        new kakao.maps.Marker({ position: new kakao.maps.LatLng(cafe.lat, cafe.lng), map });
      }
    }

    function loadCafes() {
      const cafes = getCafes();
      cafes.forEach((c, i) => appendCafe(c, [], i));
    }

    function initFixedExample() {
      const el = document.getElementById('map-fixed');
      if (!el) return;
      const map = new kakao.maps.Map(el, { center: new kakao.maps.LatLng(37.5665, 126.9780), level: 7 });
      const places = new kakao.maps.services.Places();

      places.keywordSearch('ë¡œìŠ¤íŠ¸ì•¤ë² ì´í¬ ê°€ë½ì ', (data, status) => {
        if (status !== kakao.maps.services.Status.OK || !data.length) return;
        const p = data[0];
        const latlng = new kakao.maps.LatLng(p.y, p.x);
        map.setLevel(3); map.setCenter(latlng);
        new kakao.maps.Marker({ position: latlng, map });

        const addrBox = document.querySelector('#map-fixed-addr span');
        if (addrBox) addrBox.textContent = p.road_address_name || p.address_name || '';
      });
    }

    function initForm() {
      const selectMapEl = document.getElementById('selectMap');
      const selectMap = new kakao.maps.Map(selectMapEl, {
        center: new kakao.maps.LatLng(37.5665, 126.9780), level: 7
      });
      const places = new kakao.maps.services.Places();
      const geocoder = new kakao.maps.services.Geocoder();
      const resultsEl = document.getElementById('searchResults');
      const keywordEl = document.getElementById('placeKeyword');
      const chosenAddrEl = document.getElementById('chosenAddress');
      let selMarker;

      function setSelected(latlng) {
        document.getElementById('cafeLat').value = latlng.getLat();
        document.getElementById('cafeLng').value = latlng.getLng();
        if (selMarker) selMarker.setMap(null);
        selMarker = new kakao.maps.Marker({ position: latlng, map: selectMap });

        geocoder.coord2Address(latlng.getLng(), latlng.getLat(), function (result, status) {
          if (status === kakao.maps.services.Status.OK) {
            const addr = (result[0].road_address && result[0].road_address.address_name) || result[0].address.address_name || '';
            document.getElementById('cafeAddress').value = addr;
            chosenAddrEl.textContent = addr;
          }
        });
      }

      kakao.maps.event.addListener(selectMap, 'click', (e) => { setSelected(e.latLng); });

      function doSearch() {
        const q = (keywordEl.value || '').trim();
        resultsEl.innerHTML = '';
        if (!q) return;
        places.keywordSearch(q, (data, status) => {
          if (status !== kakao.maps.services.Status.OK || !data.length) {
            resultsEl.innerHTML = '<li class="list-group-item">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ì–´ìš”.</li>'; return;
          }
          const bounds = new kakao.maps.LatLngBounds();
          data.forEach(item => {
            const li = document.createElement('li');
            li.className = 'list-group-item result-item';
            li.innerHTML = `<strong>${item.place_name}</strong><br><small class="text-muted">${item.road_address_name || item.address_name || ''}</small>`;
            li.addEventListener('click', () => {
              const latlng = new kakao.maps.LatLng(item.y, item.x);
              selectMap.setLevel(3); selectMap.panTo(latlng);
              setSelected(latlng);
            });
            resultsEl.appendChild(li);
            bounds.extend(new kakao.maps.LatLng(item.y, item.x));
          });
          selectMap.setBounds(bounds);
        });
      }
      document.getElementById('btnSearch').addEventListener('click', doSearch);
      keywordEl.addEventListener('keydown', e => { if (e.key === 'Enter') { e.preventDefault(); doSearch(); } });

      document.getElementById('cafeForm').addEventListener('submit', (e) => {
        e.preventDefault();
        const name = document.getElementById('cafeName').value.trim();
        const tags = document.getElementById('cafeTags').value.split(',').map(t => t.trim()).filter(Boolean);
        const review = document.getElementById('cafeReview').value.trim();
        const lat = parseFloat(document.getElementById('cafeLat').value);
        const lng = parseFloat(document.getElementById('cafeLng').value);
        const address = document.getElementById('cafeAddress').value;

        const files = document.getElementById('cafePhotos').files;
        const photos = [];
        for (let file of files) { photos.push(URL.createObjectURL(file)); }

        const newCafe = { name, tags, review, lat, lng, address };
        addCafe(newCafe);
        appendCafe(newCafe, photos, getCafes().length - 1);

        e.target.reset();
        resultsEl.innerHTML = '';
        chosenAddrEl.textContent = '';
        if (selMarker) { selMarker.setMap(null); selMarker = null; }
      });
    }

    // ì´ë¯¸ì§€ ëª¨ë‹¬
    const imageModal = new bootstrap.Modal(document.getElementById('imageModal'));
    const modalImage = document.getElementById('modalImage');
    document.addEventListener('click', function (e) {
      if (e.target.tagName === 'IMG' && e.target.closest('.cafe-photo')) {
        modalImage.src = e.target.src;
        imageModal.show();
      }
    });

    // ì‹¤í–‰
    document.addEventListener('DOMContentLoaded', () => {
      // Nav / Hero
      onScroll();
      syncAvatar();

      // ì¹´í˜ ê¸°ëŠ¥
      loadCafes();
      initFixedExample();
      initForm();
    });
  </script>
</body>
</html>
